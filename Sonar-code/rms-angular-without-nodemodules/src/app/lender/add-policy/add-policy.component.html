<mat-toolbar color="primary">
  <mat-toolbar-row>
    <button mat-icon-button>
      <mat-icon (click)="sidenav.toggle()">menu</mat-icon>
    </button>
    <h1>Risk Management System </h1>
    <span class="menu-spacer"></span>
    <div>

      <span style="font-size: 16px;"> Welcome, <strong> {{currentUserName}} </strong> </span>
      <button mat-button [matMenuTriggerFor]="menu">
        <strong> Lender </strong>
        <mat-icon class="material-icons">
          account_circle
        </mat-icon>
      </button>
      <mat-menu #menu="matMenu"><!-- 
        <button mat-menu-item>User Profile</button> -->
        <label mat-menu-item> {{currentUserEmail}} </label>
        <button mat-menu-item routerLink="/logout"> Logout </button>
      </mat-menu>
    </div>

  </mat-toolbar-row>

</mat-toolbar>
<mat-sidenav-container>
  <mat-sidenav #sidenav>
    <mat-nav-list>
        <a mat-list-item routerLink="/lender-home"> Home</a>
      <a mat-list-item routerLink="/view-credit-app"> Application Requests</a>
      <a mat-list-item routerLink="/new-policy"> Add Parameter in Policy </a>
      <a mat-list-item routerLink="/add-policy"> Setup Policy </a>
      <a mat-list-item routerLink="/view-policy"> View Policy </a>
      <a mat-list-item routerLink="/add-financial-analyst"> Add Financial Analyst</a>
      <a mat-list-item routerLink="/view-fa"> View Financial Analyst </a>

    <!--   <a mat-list-item (click)="sidenav.toggle()" mat-list-item>Close</a>
 -->
    </mat-nav-list>

  </mat-sidenav>

  <mat-sidenav-content>
    <div style="height: 88vh;">

      <div class="container">
        <br>
        <div class="row">

          <div class="col-sm-12">
<mat-card>
  <div class="mat-elevation-z8" style ="text-align: center" >
      <div class="mat-toolbar-tools search-bar">
          
     
<br>
<h4 style="color:#3f51b5">Update Policies
        <mat-icon matTooltip="Status, Threshold and Weightage are updatable.">
                  info
          </mat-icon>
      </h4>
      <br>




</div>
</div>

<br>
<div class="mat-elevation-z8" style ="text-align: center" >
  <form #updatepolicyForm="ngForm" (ngSubmit)="onSubmit($event)">
      <br>
    <table id="mytable" >
      <thead>
        <th>Policy Name </th>
        <th>Threshold </th>
        <th>Weightage (0-100)</th>
        <th> Policy Status <mat-icon aria-hidden="false" matTooltip="Policies can be active/inactive"
            aria-label="Example home icon">info</mat-icon>
        </th>
      </thead>
      
      <tbody>

        <tr *ngFor="let policy of policy">
         
          <input type="hidden" value={{policy.policyId}}>
          <td width="150px"> {{policy.policyName}}
          </td>
          <td>
              <mat-form-field class="example-full-width">
              
            <input type="number" matInput value={{policy.threshold}} min=0  oninput="validity.valid||(value='');"  name="threshold">
        <!--     <mat-error *ngIf="updatepolicyForm.form.invalid">
              </mat-error> -->
              </mat-form-field>
          </td>
          <td>
              <mat-form-field >
            <input type="number" matInput  min="0" max="100" name="weightage" oninput="validity.valid||(value='');"  value={{policy.policyWeightage}}>
           </mat-form-field>
          </td>
          <td>
            <mat-slide-toggle class="example-margin" [color]="'success'" [checked]="policy.policyStatus" [disabled]="false"
              (change)="onChange($event ,policy.policyId)"></mat-slide-toggle>
          </td>
        </tr>
        
      </tbody>
    </table>
    <br>
    <button mat-raised-button color="primary">Update Policy</button>
    <br>
    <br>
  </form>
</div>
</mat-card>
</div>
</div></div></div></mat-sidenav-content>
</mat-sidenav-container>
