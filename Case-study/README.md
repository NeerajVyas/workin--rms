# rms


MYSQL QUERY SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0; SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0; SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- Schema RMS

-- Schema RMS

CREATE SCHEMA IF NOT EXISTS RMS DEFAULT CHARACTER SET utf8 ; USE RMS ;

-- Table RMS.USER

CREATE TABLE IF NOT EXISTS RMS.USER ( USER_ID INT NOT NULL AUTO_INCREMENT, USER_NAME VARCHAR(30) NOT NULL, USER_EMAIL VARCHAR(45) NOT NULL, USER_PASSWORD VARCHAR(70) NOT NULL, USER_ROLE VARCHAR(25) NOT NULL, USER_AI_STATUS INT(1) NOT NULL, CREATION_DATE DATETIME NOT NULL, MODIFICATION_DATE DATETIME NOT NULL, PRIMARY KEY (USER_ID)) ENGINE = InnoDB;

-- Table RMS.LENDER

CREATE TABLE IF NOT EXISTS RMS.LENDER ( LENDER_ID INT NOT NULL, LOAN_INTEREST INT NOT NULL, LENDER_DESCRIPTION VARCHAR(120) NOT NULL, TENURE_RANGE VARCHAR(30) NOT NULL, LOAN_AMOUNT_RANGE VARCHAR(30) NOT NULL, CONSTRAINT LENDER_ID FOREIGN KEY (LENDER_ID) REFERENCES RMS.USER (USER_ID) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;

-- Table RMS.POLICY

CREATE TABLE IF NOT EXISTS RMS.POLICY ( POLICY_ID INT NOT NULL AUTO_INCREMENT, POLICY_NAME VARCHAR(30) NOT NULL, LENDER_ID INT NOT NULL, CREATION_DATE DATETIME NOT NULL, MODIFICATION_DATE DATETIME NOT NULL, PRIMARY KEY (POLICY_ID)) ENGINE = InnoDB;

-- Table RMS.CREDIT_APPLICATION

CREATE TABLE IF NOT EXISTS RMS.CREDIT_APPLICATION ( APPLICATION_ID INT NOT NULL AUTO_INCREMENT, CREDIT_SCORE INT(1) NOT NULL, APPLICATION_STATUS INT(1) NOT NULL, COMPANY_NAME VARCHAR(30) NOT NULL, BORROWER_ID INT NOT NULL, FINANCIAL_ANALYST_ID INT NOT NULL, LENDER_ID INT NOT NULL, CREATION_DATE DATETIME NOT NULL, MODIFICATION_DATE DATETIME NOT NULL, PRIMARY KEY (APPLICATION_ID),

FOREIGN KEY (`BORROWER_ID`)
REFERENCES RMS.USER (USER_ID) ON DELETE NO ACTION ON UPDATE NO ACTION,

FOREIGN KEY (LENDER_ID) REFERENCES RMS.USER (USER_ID) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB;

-- Table RMS.MAPPING_CREDITAPP_POLICY

CREATE TABLE IF NOT EXISTS RMS.MAPPING_CREDITAPP_POLICY ( FIELD_ID INT NOT NULL AUTO_INCREMENT, APPLICATION_ID INT NOT NULL, POLICY_ID INT NOT NULL COMMENT '	', POLICY_VALUE VARCHAR(20) NOT NULL, PRIMARY KEY (FIELD_ID), INDEX APPLICATION_ID_idx (APPLICATION_ID ASC), INDEX POLICY_ID_idx (POLICY_ID ASC), CONSTRAINT APPLICATION_ID FOREIGN KEY (APPLICATION_ID) REFERENCES RMS.CREDIT_APPLICATION (APPLICATION_ID) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT POLICY_ID FOREIGN KEY (POLICY_ID) REFERENCES RMS.POLICY (POLICY_ID) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;

-- Table RMS.MAPPING_POLICY_BORROWER

CREATE TABLE IF NOT EXISTS RMS.MAPPING_POLICY_BORROWER ( POLICY_ID INT NOT NULL, POLICY_VALUE VARCHAR(20) NOT NULL, BORROWER_ID INT NOT NULL, INDEX BORROWER_ID_idx (BORROWER_ID ASC), INDEX POLICY_ID_idx (POLICY_ID ASC),

FOREIGN KEY (POLICY_ID) REFERENCES RMS.POLICY (POLICY_ID) ON DELETE NO ACTION ON UPDATE NO ACTION,

FOREIGN KEY (BORROWER_ID) REFERENCES RMS.USER (USER_ID) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS RMS.POLICY_DETAIL ( DETAIL_ID INT(2) NOT NULL AUTO_INCREMENT primary key, LENDER_ID INT(2) NOT NULL, POLICY_ID INT(2) NOT NULL, THRESHOLD VARCHAR(20) NOT NULL, POLICY_WEIGHTAGE INT(1) NOT NULL, POLICY_STATUS INT(1) NOT NULL) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS RMS.FINANCIAL_ANALYST ( FINANCIAL_ANALYST_ID INT NOT NULL PRIMARY KEY,

FOREIGN KEY (`FINANCIAL_ANALYST_ID`)
REFERENCES RMS.USER (USER_ID) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE; SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS; SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

  create table OTP (
       EMAIL_ID varchar(255) not null,
        OTP varchar(255),
        VERIFIED varchar(255),
        primary key (EMAIL_ID)
    ); 



use RMS;

insert into USER values(999,'ADMIN','mailer.rms.2019@gmail.com','$2a$10$XQ6n0BRsSTyiLehSteUxmu8Cf1/yW9bnBglB2QnOBivP74U21sfVO','ROLE_ADMIN',1,'2019-7-6','2019-7-6');

insert into POLICY values(50001,'Total Assets',0,'2019-7-5','2019-7-5'); insert into POLICY values(50002,'Turnover',0,'2019-7-5','2019-7-5'); insert into POLICY values(50003,'Total Liabilities',0,'2019-7-5','2019-7-5'); insert into POLICY values(50004,'Revenue',0,'2019-7-5','2019-7-5');
